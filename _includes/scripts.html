<script>
  // Makes figure images focusable for zooming
  let figureImages = document.querySelectorAll ("figure img");
  figureImages.forEach (function (figureImage) {
    figureImage.setAttribute ("tabindex", -1);
    document.addEventListener ('mousedown', event => {
      if (document.activeElement === figureImage) {
        // Prevent it from triggering on focusIn
        setTimeout (function () {
          document.activeElement.blur ();
        }, 100);
      }
    });
  });

  //Toggle night mode
  function toggleNightMode() {
    const mode = localStorage.getItem('mode');
    if (mode === 'dark') {
      document.body.classList.add('night-mode');
    } else {
      document.body.classList.remove('night-mode');
    }
  }
  toggleNightMode();
  document.getElementById('toggle-night-mode').addEventListener('click', e => {
    e.preventDefault();
    if (localStorage.getItem('mode') !== 'dark') {
      localStorage.setItem('mode', 'dark');
    } else {
      localStorage.removeItem('mode');
    }
    toggleNightMode();
  })
</script>

